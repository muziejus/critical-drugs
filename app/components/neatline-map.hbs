<LeafletMap 
  @lat={{this.neatlineMap.lat}} 
  @lng={{this.neatlineMap.lng}} 
  @zoom={{this.neatlineMap.zoom}} 
  @onLoad={{this.onLoad}}
  ...attributes
   as |layers|>
  <layers.tile @url="https://{s}.basemaps.cartocdn.com/light_all/{z}/{x}/{y}.png"/>
  {{#each @records as |point|}}
      {{#let (convert-coordinates point.coverage) as |coordinates|}}
        {{#if (or
          (and 
            (lte point.afterDate this.neatlineFilter.afterYear)
            (not point.beforeDate)
          )
          (and
            (lte point.afterDate this.neatlineFilter.afterYear)
            (gte point.beforeDate this.neatlineFilter.beforeYear)
          )
            )}}
          <layers.circle-marker @lat={{coordinates.latitude}}
            @lng={{coordinates.longitude}}
            @title={{point.title}}
            @className={{concat "timeline-marker record-id-" point.id}}
            @onClick={{this.handleMarkerClick}}
            as |marker|>
              <marker.tooltip>
                {{if point.title point.title point.itemTitle}}
              </marker.tooltip>
            </layers.circle-marker>
          {{/if}}
      {{/let}}
  {{/each}}

</LeafletMap>

